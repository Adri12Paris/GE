<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Equity – Demo</title>

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 (UMD) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel (JSX in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>

  <body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      // --- Icônes (remplacement de lucide-react pour un HTML standalone) ---
      const IconBase = ({ size = 24, className = "" }) => (
        <svg
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
          aria-hidden="true"
        >
          <circle cx="12" cy="12" r="9"></circle>
          <path d="M12 7v5l3 2"></path>
        </svg>
      );

      const Search = IconBase;
      const User = IconBase;
      const Briefcase = IconBase;
      const FileText = IconBase;
      const ShieldCheck = IconBase;
      const Zap = IconBase;
      const ChevronRight = IconBase;
      const Download = IconBase;
      const MessageSquare = IconBase;
      const Filter = IconBase;
      const LayoutDashboard = IconBase;
      const Settings = IconBase;
      const CheckCircle = IconBase;
      const Clock = IconBase;
      const Euro = IconBase;
      const Target = IconBase;
      const Users = IconBase;
      const Building2 = IconBase;
      const Bell = IconBase;
      const ExternalLink = IconBase;
      const Edit3 = IconBase;
      const History = IconBase;
      const Info = IconBase;
      const Calendar = IconBase;
      const Trash2 = IconBase;
      const Sparkles = IconBase;
      const FileCheck = IconBase;
      const ShieldAlert = IconBase;
      const PieChart = IconBase;
      const ArrowUpRight = IconBase;
      const Headphones = IconBase;
      const Award = IconBase;
      const GraduationCap = IconBase;
      const ClipboardCheck = IconBase;
      const ArrowRight = IconBase;
      const FileSignature = IconBase;
      const BookOpen = IconBase;

      // --- CONSTANTES DE DONNÉES ---
      const MARC_ANTOINE = {
        id: 1,
        name: "Marc-Antoine D.",
        title: "Senior Data Engineer",
        tjm: 620,
        availability: "Sous 2 mois",
        skills: ["Python", "Spark", "AWS", "Airflow", "GCP", "Terraform", "BigQuery"],
        experience: "11 ans",
        matchScore: 98,
        location: "Paris / Remote",
        school: "CentraleSupélec (2015)",
        bio: "Expert Data Engineering avec une forte culture Cloud (AWS/GCP). Spécialisé dans la construction de plateformes de données scalables et l'optimisation des coûts d'infrastructure.",
        xp_history: [
          {
            company: "France Télévisions",
            role: "Lead Data Engineer (GCP)",
            period: "2023 - Présent",
            desc: "Migration de la plateforme data vers Google Cloud Platform. Optimisation des pipelines BigQuery et mise en place de la gouvernance de données sur l'ensemble des flux média."
          },
          {
            company: "Engie",
            role: "Senior Data Engineer (AWS)",
            period: "2020 - 2023",
            desc: "Développement de solutions de monitoring énergétique en temps réel via Kinesis et EMR sur AWS. Optimisation de 30% des coûts d'infrastructure cloud."
          },
          {
            company: "Capgemini (Mission SNCF)",
            role: "Développeur Big Data",
            period: "2018 - 2020",
            desc: "Conception d'une architecture Hadoop/Spark pour l'analyse de données de maintenance prédictive des rames. Gestion de flux Kafka haute disponibilité."
          },
          {
            company: "Capgemini (Mission EDF)",
            role: "Ingénieur Études & Développement",
            period: "2015 - 2018",
            desc: "Développement d'outils de pilotage de production. Stack Java/Spring et optimisation de requêtes SQL complexes pour le traitement de volumes massifs."
          }
        ],
        education: [
          {
            school: "CentraleSupélec",
            degree: "Diplôme d'Ingénieur de l'École Centrale",
            year: "2015",
            desc: "Filière Systèmes d'Information et Big Data."
          }
        ],
        certifications: [
          { name: "AWS Certified Solutions Architect", year: "2023", issuer: "AWS" },
          { name: "AWS Certified Data Engineer", year: "2023", issuer: "AWS" },
          { name: "Professional Scrum Master I", year: "2010", issuer: "Agile Alliance" }
        ]
      };

      const OTHER_PROFILES = [
        { id: 2, name: "Sophie L.", title: "Data Engineer Confirmée", tjm: 580, availability: "Immédiate", skills: ["SQL", "Azure"], experience: "5 ans", matchScore: 82, location: "Paris", school: "Epitech (2021)" },
        { id: 3, name: "Kevin M.", title: "Consultant Big Data", tjm: 640, availability: "Sous 1 mois", skills: ["Java", "Kafka"], experience: "7 ans", matchScore: 75, location: "Nantes", school: "INSA Lyon (2019)" }
      ];

      const CONSULTATION_HISTORY = [
        { id: 1, query: "Data Engineer Senior Cloud AWS/GCP", date: "12/01/2026", results: 12, matchAvg: "96%" },
        { id: 2, query: "Architecte Solutions Big Data Spark", date: "05/01/2026", results: 8, matchAvg: "92%" },
        { id: 3, query: "Expert Kafka / Flux temps réel", date: "28/12/2025", results: 15, matchAvg: "88%" },
      ];

      const SGP_MISSIONS = [
        { name: "Marc-Antoine D.", ref: "SGP-2026-042", status: "En cours", end: "Dec 2026" },
        { name: "Dev Fullstack JS", ref: "SGP-001", status: "En cours", end: "Juin 2026" },
        { name: "Expert Cloud Ops", ref: "SGP-005", status: "En cours", end: "Jan 2027" },
        { name: "Data Scientist", ref: "SGP-007", status: "En cours", end: "Mai 2026" },
        { name: "UX/UI Designer", ref: "SGP-004", status: "En cours", end: "Oct 2026" }
      ];

      const JOB_OFFERS = [
        { client: "SNCF", title: "Lead Data Engineer Spark", tj: "750€", loc: "St-Denis", type: "Expert" },
        { client: "SNCF", title: "Architecte Flux Temps Réel", tj: "800€", loc: "St-Denis", type: "Senior" },
        { client: "EDF", title: "Ingénieur Cloud AWS", tj: "680€", loc: "La Défense", type: "Confirmé" },
        { client: "EDF", title: "Data Analyst Senior", tj: "600€", loc: "Remote", type: "Senior" },
        { client: "EDF", title: "Consultant Gouvernance Data", tj: "720€", loc: "Lyon", type: "Expert" },
        { client: "Air France", title: "Data Ops GCP", tj: "700€", loc: "Roissy", type: "Hybride" },
        { client: "TotalEnergies", title: "Data Scientist Forecast", tj: "750€", loc: "Pau", type: "Expert" },
        { client: "Renault", title: "Expert Kafka / Streaming", tj: "700€", loc: "Guyancourt", type: "Expert" },
        { client: "SGP", title: "Data Engineer Senior (Nouveau)", tj: "650€", loc: "St-Denis", type: "Senior" },
        { client: "SGP", title: "Chef de Projet Data Ops", tj: "750€", loc: "St-Denis", type: "Expert" },
      ];

      // --- SOUS-COMPOSANTS ---
      const Sidebar = ({ userRole, switchRole, currentView, setCurrentView }) => (
        <div className="w-72 bg-slate-900 text-white flex flex-col h-screen sticky top-0 border-r border-slate-800 shadow-2xl z-20 shrink-0 overflow-y-auto">
          <div className="p-6 border-b border-slate-800">
            <h1 className="text-2xl font-black flex items-center gap-2">
              <ShieldCheck className="text-emerald-400" />
              <span className="tracking-tighter uppercase font-black">Equity</span>
            </h1>
            <div className="mt-6 flex bg-slate-800 p-1 rounded-xl">
              <button
                onClick={() => switchRole('client')}
                className={`flex-1 text-[10px] font-black py-2 rounded-lg uppercase tracking-wider transition ${userRole === 'client' ? 'bg-emerald-600 text-white shadow-lg' : 'text-slate-400 hover:text-white'}`}
              >
                Client
              </button>
              <button
                onClick={() => switchRole('freelance')}
                className={`flex-1 text-[10px] font-black py-2 rounded-lg uppercase tracking-wider transition ${userRole === 'freelance' ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-400 hover:text-white'}`}
              >
                Freelance
              </button>
            </div>
          </div>

          <nav className="flex-1 px-4 py-6 space-y-1">
            {userRole === 'client' ? (
              <>
                <div className="text-[10px] font-bold text-slate-500 uppercase px-4 mb-2 tracking-widest text-emerald-500/50">Recrutement</div>
                <button
                  onClick={() => setCurrentView('marketplace')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'marketplace' || currentView === 'profile_detail' ? 'bg-emerald-600 shadow-lg shadow-emerald-900/50' : 'hover:bg-slate-800'}`}
                >
                  <Search size={18} /> Marketplace
                </button>
                <button
                  onClick={() => setCurrentView('consultations')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'consultations' ? 'bg-emerald-600 shadow-lg shadow-emerald-900/50' : 'hover:bg-slate-800'}`}
                >
                  <History size={18} /> Précédentes consultations
                </button>
                <div className="text-[10px] font-bold text-slate-500 uppercase px-4 mb-2 mt-8 tracking-widest">Opérations</div>
                <button
                  onClick={() => setCurrentView('client_missions')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'client_missions' ? 'bg-emerald-600 shadow-lg shadow-emerald-900/50' : 'hover:bg-slate-800'}`}
                >
                  <Users size={18} /> Prestations actives
                </button>
              </>
            ) : (
              <>
                <div className="text-[10px] font-bold text-slate-500 uppercase px-4 mb-2 tracking-widest text-blue-500/50">Ma Carrière</div>
                <button
                  onClick={() => setCurrentView('freelance_dashboard')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'freelance_dashboard' ? 'bg-blue-600 shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800'}`}
                >
                  <LayoutDashboard size={18} /> Dashboard
                </button>
                <button
                  onClick={() => setCurrentView('freelance_profile')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'freelance_profile' ? 'bg-blue-600 shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800'}`}
                >
                  <User size={18} /> Mon Profil
                </button>
                <button
                  onClick={() => setCurrentView('freelance_job_offers')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'freelance_job_offers' ? 'bg-blue-600 shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800'}`}
                >
                  <Target size={18} /> Consultations en cours
                </button>
                <button
                  onClick={() => setCurrentView('freelance_mission_sgp')}
                  className={`w-full flex items-center gap-3 p-3 rounded-xl transition font-medium text-left ${currentView === 'freelance_mission_sgp' ? 'bg-blue-600 shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800'}`}
                >
                  <Briefcase size={18} /> Mission SGP
                </button>
              </>
            )}
          </nav>
        </div>
      );

      const MarketplaceView = ({
        searchQuery, setSearchQuery, handleStartMatching, isMatching,
        tjmRange, setTjmRange, selectedDispo, setSelectedDispo,
        hasMatched, setSelectedProfile, setCurrentView, setShowSourcingIntro
      }) => (
        <div className="space-y-8 pb-10">
          <div className="bg-white p-6 md:p-10 rounded-3xl md:rounded-[48px] shadow-sm border border-slate-100 relative overflow-hidden">
            <div className="flex flex-col md:flex-row justify-between items-start mb-8 gap-4">
              <h2 className="text-2xl font-black text-slate-800 flex items-center gap-2">
                <Zap className="text-amber-500" /> SkillMatch <span className="text-emerald-600">AI</span>
              </h2>
              <div className="bg-blue-50 border border-blue-100 p-4 rounded-2xl max-w-sm flex gap-3 shadow-sm">
                <Info className="text-blue-500 shrink-0" size={20} />
                <p className="text-[11px] font-bold text-blue-800 leading-tight">
                  Conseil : copiez et collez ici votre fiche de poste pour que l'IA identifie les meilleurs profils.
                </p>
              </div>
            </div>
            <div className="relative group">
              <textarea
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="w-full h-44 p-6 md:p-8 border-2 border-slate-100 rounded-3xl md:rounded-[32px] focus:border-emerald-500 focus:ring-8 focus:ring-emerald-50 outline-none transition-all resize-none bg-slate-50 font-medium text-slate-700 shadow-inner"
                placeholder="Ex: Besoin d'un Data Engineer senior AWS..."
              />
              <div className="md:absolute bottom-6 right-6 mt-4 md:mt-0">
                <button
                  onClick={handleStartMatching}
                  className="w-full md:w-auto bg-emerald-600 text-white px-8 md:px-12 py-4 md:py-5 rounded-2xl md:rounded-[24px] font-black hover:bg-emerald-700 transition-all shadow-xl shadow-emerald-200 flex items-center justify-center gap-2 tracking-widest"
                >
                  {isMatching ? 'Analyse...' : 'Lancer le matching'} <Search size={22} />
                </button>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-12 gap-8">
            <div className="col-span-12 lg:col-span-3 space-y-8">
              <div className="bg-white p-8 rounded-3xl md:rounded-[40px] border border-slate-100 shadow-sm">
                <h3 className="font-black text-slate-800 mb-8 flex items-center gap-2 uppercase text-xs tracking-widest border-b pb-4">
                  <Filter size={16}/> Critères
                </h3>

                <div className="space-y-10">
                  <div>
                    <div className="flex justify-between items-center mb-4">
                      <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Budget TJM Max</label>
                      <span className="text-sm font-black text-emerald-600 bg-emerald-50 px-3 py-1 rounded-lg border border-emerald-100">{tjmRange}€</span>
                    </div>
                    <input
                      type="range"
                      min="350"
                      max="1500"
                      step="10"
                      value={tjmRange}
                      onChange={(e) => setTjmRange(e.target.value)}
                      className="w-full accent-emerald-600 h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer"
                    />
                  </div>

                  <div>
                    <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-4">Disponibilité</label>
                    <div className="space-y-4">
                      {['Immédiate', 'Sous 1 mois', 'Sous 3 mois'].map(d => (
                        <label key={d} className="flex items-center gap-3 cursor-pointer group">
                          <input
                            type="checkbox"
                            checked={selectedDispo === d}
                            onChange={() => setSelectedDispo(d)}
                            className="w-5 h-5 accent-emerald-600 border-2 border-slate-200 rounded-md appearance-none checked:bg-emerald-600 transition-all cursor-pointer"
                          />
                          <span className={`text-sm font-bold ${selectedDispo === d ? 'text-emerald-700' : 'text-slate-500'}`}>{d}</span>
                        </label>
                      ))}
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-indigo-600 p-8 rounded-3xl md:rounded-[48px] text-white shadow-2xl relative overflow-hidden group border-b-[10px] border-indigo-800">
                <div className="absolute -right-6 -top-6 opacity-20 rotate-12 group-hover:scale-110 transition-transform">
                  <Headphones size={120}/>
                </div>
                <div className="relative z-10 space-y-6">
                  <div className="space-y-2">
                    <h4 className="font-black text-xl tracking-tighter leading-tight italic uppercase">Besoin d'aide ?</h4>
                    <p className="text-xs text-indigo-100 font-bold leading-relaxed">Nos account managers effectuent un sourcing sur mesure pour vous parmi 12k+ profils.</p>
                  </div>
                  <button
                    onClick={() => setShowSourcingIntro(true)}
                    className="w-full bg-white text-indigo-700 py-4 rounded-2xl md:rounded-[20px] font-black text-[10px] uppercase tracking-widest hover:bg-slate-50 transition-all shadow-xl shadow-indigo-900/40"
                  >
                    Solliciter nos experts
                  </button>
                </div>
              </div>
            </div>

            <div className="col-span-12 lg:col-span-9 space-y-6">
              {!hasMatched ? (
                <div className="bg-white border-2 border-dashed border-slate-200 rounded-3xl md:rounded-[56px] p-12 md:p-24 text-center text-slate-300 font-black italic space-y-4">
                  <div className="w-16 md:w-20 h-16 md:h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto shadow-inner">
                    <Sparkles size={40} />
                  </div>
                  <p className="text-lg">Lancez l'IA SkillMatch pour afficher les profils qualifiés.</p>
                </div>
              ) : (
                <>
                  <div className="flex justify-between items-end pb-4 border-b border-slate-200">
                    <p className="text-slate-700 font-black tracking-tight"><span className="text-emerald-600">3 experts retenus</span> pour SGP</p>
                    <span className="text-[10px] font-black text-amber-700 bg-amber-100 px-4 py-1.5 rounded-full uppercase tracking-tighter shadow-sm border border-amber-200">Algorithme optimisé</span>
                  </div>

                  <div
                    onClick={() => {setSelectedProfile(MARC_ANTOINE); setCurrentView('profile_detail');}}
                    className="group bg-white p-6 md:p-10 rounded-3xl md:rounded-[56px] border-2 border-emerald-400 shadow-xl shadow-emerald-50 hover:translate-y-[-4px] transition-all cursor-pointer relative overflow-hidden"
                  >
                    <div className="absolute top-0 right-0 bg-emerald-600 text-white px-6 md:px-8 py-2 md:py-2.5 text-[10px] font-black uppercase rounded-bl-[20px] md:rounded-bl-[40px] tracking-widest shadow-lg">
                      Recommandation Equity
                    </div>
                    <div className="flex flex-col md:flex-row gap-6 md:gap-10 items-center">
                      <div className="w-24 h-24 md:w-28 md:h-28 rounded-3xl md:rounded-[40px] bg-emerald-600 text-white flex items-center justify-center text-4xl md:text-5xl font-black shadow-xl border-[6px] md:border-[10px] border-emerald-50 transform group-hover:scale-105 transition-transform duration-500">
                        MD
                      </div>
                      <div className="flex-1 w-full text-center md:text-left">
                        <div className="flex flex-col md:flex-row justify-between items-start mb-2 gap-4">
                          <div>
                            <h4 className="text-2xl md:text-3xl font-black text-slate-800 tracking-tighter">{MARC_ANTOINE.name}</h4>
                            <p className="text-emerald-600 font-black text-xs uppercase mt-2 tracking-widest">{MARC_ANTOINE.title}</p>
                          </div>
                          <div className="text-right w-full md:w-auto">
                            <div className="text-4xl md:text-5xl font-black text-emerald-600 tracking-tighter italic">98%</div>
                            <p className="text-[9px] font-black text-slate-400 uppercase tracking-widest">Match IA</p>
                          </div>
                        </div>
                        <div className="flex justify-center md:justify-start gap-10 mt-8 border-t border-slate-50 pt-6">
                          <span className="flex items-center gap-3 text-base font-black text-slate-700"><Euro size={20} className="text-amber-500" /> {MARC_ANTOINE.tjm}€/j</span>
                          <span className="flex items-center gap-3 text-base font-black text-slate-700"><Clock size={20} className="text-emerald-500" /> {MARC_ANTOINE.availability}</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  {OTHER_PROFILES.map(p => (
                    <div
                      key={p.id}
                      className="bg-white p-6 md:p-8 rounded-3xl md:rounded-[48px] border border-slate-100 shadow-sm opacity-80 flex gap-6 md:gap-8 items-center hover:opacity-100 hover:shadow-lg transition-all group cursor-pointer"
                      onClick={() => {setSelectedProfile(p); setCurrentView('profile_detail');}}
                    >
                      <div className="w-16 h-16 md:w-20 md:h-20 rounded-2xl md:rounded-[32px] bg-slate-100 flex items-center justify-center text-2xl md:text-3xl font-black text-slate-400 group-hover:bg-slate-200 transition-all">
                        {p.name[0]}{p.name.split(' ')[1][0]}
                      </div>
                      <div className="flex-1">
                        <div className="flex justify-between items-center">
                          <div>
                            <h4 className="text-lg md:text-xl font-black text-slate-800">{p.name}</h4>
                            <p className="text-slate-500 text-[10px] font-black uppercase tracking-widest">{p.title}</p>
                          </div>
                          <div className="text-2xl md:text-3xl font-black text-slate-200 group-hover:text-emerald-500 transition-colors">{p.matchScore}%</div>
                        </div>
                      </div>
                    </div>
                  ))}
                </>
              )}
            </div>
          </div>
        </div>
      );

      const ProfileDetailView = ({ selectedProfile, setCurrentView, setShowIntroductionIntro, setShowDownloadModal, searchQuery }) => (
        <div className="max-w-5xl mx-auto space-y-8 relative pb-28">
          <button
            onClick={() => setCurrentView('marketplace')}
            className="text-slate-500 hover:text-emerald-600 font-black uppercase text-[10px] tracking-widest flex items-center gap-2 transition group px-4"
          >
            <ChevronRight className="rotate-180" size={14} /> Retour à la recherche
          </button>

          <div className="bg-white rounded-3xl md:rounded-[72px] shadow-sm border border-slate-100 overflow-hidden relative">
            <div className="h-48 md:h-64 bg-gradient-to-br from-slate-900 via-blue-900 to-emerald-900 relative">
              <div className="absolute top-4 md:top-8 right-6 md:right-14">
                <span className="bg-white/10 backdrop-blur-xl text-white px-4 md:px-6 py-2 md:py-2.5 rounded-xl md:rounded-2xl text-[10px] font-black uppercase tracking-widest border border-white/20 shadow-2xl">
                  Expert Groupe Equity
                </span>
              </div>
            </div>

            <div className="px-6 md:px-16 pb-16 relative">
              <div className="flex flex-col md:flex-row items-center md:items-end justify-start -mt-24 md:-mt-32 relative z-40 gap-8 md:gap-24">
                <div className="w-40 h-40 md:w-60 md:h-60 bg-white border-[8px] md:border-[18px] border-white rounded-3xl md:rounded-[64px] shadow-2xl flex items-center justify-center text-6xl md:text-8xl font-black text-emerald-600 shrink-0">
                  {(selectedProfile?.name || "X").split(' ').map(n => n[0]).join('')}
                </div>

                <div className="flex flex-wrap gap-4 md:gap-6 pb-4 md:pb-8 w-full justify-center md:justify-start">
                  <button
                    onClick={() => setShowDownloadModal(true)}
                    className="px-8 md:px-12 py-4 md:py-5 bg-white border-2 border-slate-100 rounded-2xl md:rounded-[32px] font-black text-slate-700 hover:bg-slate-50 transition-all flex items-center gap-4 shadow-xl hover:border-blue-200 text-sm"
                  >
                    <Download size={24} className="text-blue-600" /> Dossier PDF
                  </button>
                  <button
                    onClick={() => setShowIntroductionIntro(true)}
                    className="px-10 md:px-14 py-4 md:py-5 bg-emerald-600 text-white rounded-2xl md:rounded-[32px] font-black hover:bg-emerald-700 transition-all flex items-center gap-4 shadow-2xl shadow-emerald-200 text-sm"
                  >
                    <MessageSquare size={24} /> Coordonnées
                  </button>
                </div>
              </div>

              <div className="grid grid-cols-12 gap-8 md:gap-16 mt-16 md:mt-20 relative z-30">
                <div className="col-span-12 lg:col-span-8 space-y-12 md:space-y-16">
                  <div className="space-y-6 text-center md:text-left">
                    <div className="flex flex-col md:flex-row items-center md:items-baseline gap-4 md:gap-6 flex-wrap">
                      <h2 className="text-4xl md:text-7xl font-black text-slate-800 tracking-tighter uppercase leading-none">{selectedProfile?.name}</h2>
                      <span className="bg-amber-100 text-amber-700 px-5 py-2 rounded-2xl text-[11px] font-black uppercase tracking-widest shadow-sm">
                        {selectedProfile?.school || "Expert Certifié"}
                      </span>
                    </div>
                    <p className="text-2xl md:text-4xl text-emerald-600 font-black tracking-tight leading-none italic">
                      {selectedProfile?.title} • {selectedProfile?.experience || 'Expertise'} d'expertise
                    </p>
                    <p className="text-slate-500 text-lg md:text-xl font-medium leading-relaxed max-w-3xl md:pl-10 pt-4">
                      {selectedProfile?.bio}
                    </p>
                  </div>

                  <div className="space-y-10 md:space-y-12">
                    <h3 className="text-2xl font-black text-slate-800 flex items-center gap-4 border-b border-slate-100 pb-6 md:pb-8 uppercase tracking-widest">
                      <History size={32} className="text-blue-500" /> Missions détaillées
                    </h3>
                    <div className="space-y-12 md:space-y-16 border-l-[6px] border-slate-50 pl-6 md:pl-14 ml-2">
                      {(selectedProfile?.xp_history || []).map((xp, i) => (
                        <div key={i} className="relative group">
                          <div className="absolute -left-[38px] md:-left-[68px] top-1.5 w-6 md:w-9 h-6 md:h-9 rounded-lg md:rounded-[14px] bg-white border-[4px] md:border-[6px] border-emerald-500 shadow-xl"></div>
                          <div className="flex flex-col md:flex-row justify-between items-start mb-4 gap-2">
                            <h4 className="font-black text-slate-800 text-2xl md:text-3xl tracking-tighter uppercase">{xp.company}</h4>
                            <span className="text-[11px] font-black text-slate-400 bg-slate-50 px-5 py-2 rounded-2xl border border-slate-100 uppercase tracking-[0.2em]">{xp.period}</span>
                          </div>
                          <p className="text-emerald-600 font-black text-base uppercase mb-6 md:mb-8 tracking-widest italic">{xp.role}</p>
                          <p className="text-slate-500 text-lg md:text-xl leading-relaxed bg-slate-50/50 p-6 md:p-10 rounded-2xl md:rounded-[48px] border border-slate-100 shadow-inner">
                            {xp.desc}
                          </p>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>

                <div className="col-span-12 lg:col-span-4 space-y-12">
                  <div className="bg-slate-50 p-8 md:p-14 rounded-3xl md:rounded-[64px] border border-slate-100 space-y-10 md:space-y-14 shadow-inner relative overflow-hidden">
                    <h3 className="font-black text-slate-400 uppercase text-[11px] tracking-[0.5em] border-b border-slate-200 pb-6 md:pb-8 text-center">
                      Indicateurs clés
                    </h3>

                    <div className="space-y-12 md:space-y-16">
                      <div className="flex flex-col items-center gap-4 text-center">
                        <span className="text-slate-500 text-[10px] font-black uppercase tracking-[0.3em]">TJM Suggéré</span>
                        <div className="flex items-baseline gap-2 text-slate-900 bg-white px-8 md:px-12 py-4 md:py-6 rounded-3xl md:rounded-[36px] shadow-xl border border-slate-100">
                          <span className="font-black text-4xl md:text-6xl tracking-tighter italic leading-none">{selectedProfile?.tjm}</span>
                          <span className="font-black text-xl md:text-2xl uppercase">€/j</span>
                        </div>
                      </div>

                      <div className="flex flex-col items-center gap-4 text-center px-6">
                        <span className="text-slate-500 text-[10px] font-black uppercase tracking-[0.3em]">Zone Mobilité</span>
                        <p className="font-black text-slate-800 text-xl md:text-2xl leading-tight uppercase tracking-tight italic border-b-4 border-amber-200 inline-block">
                          {selectedProfile?.location}
                        </p>
                      </div>

                      <div className="flex flex-col items-center gap-8 text-center">
                        <span className="text-slate-500 text-[10px] font-black uppercase tracking-[0.3em]">Disponibilité</span>
                        <div className="bg-emerald-600 text-white px-10 md:px-14 py-4 md:py-6 rounded-full shadow-2xl shadow-emerald-200 font-black text-xs md:text-sm uppercase tracking-[0.2em]">
                          {selectedProfile?.availability}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="space-y-10">
                    <h3 className="font-black text-slate-400 uppercase text-[11px] tracking-[0.5em] mb-8 px-6 text-center">Core Expertise</h3>
                    <div className="flex flex-wrap gap-3 md:gap-4 justify-center">
                      {(selectedProfile?.skills || []).map(skill => (
                        <span
                          key={skill}
                          className="px-6 md:px-8 py-3 md:py-4 bg-white border-2 border-slate-100 text-slate-800 rounded-2xl md:rounded-3xl text-xs font-black shadow-sm uppercase tracking-widest"
                        >
                          {skill}
                        </span>
                      ))}
                    </div>
                  </div>

                  <div className="p-10 md:p-14 bg-slate-900 rounded-3xl md:rounded-[72px] text-white relative overflow-hidden group shadow-2xl border-t-[12px] border-emerald-500">
                    <div className="absolute -right-14 -bottom-14 opacity-20 rotate-12 scale-150 pointer-events-none text-emerald-400">
                      <Target size={240} />
                    </div>
                    <div className="relative z-10">
                      <h4 className="font-black mb-2 text-[11px] uppercase text-emerald-400 tracking-[0.5em]">Analyse SkillMatch</h4>
                      <div className="flex items-baseline gap-2 mt-6">
                        <p className="text-6xl md:text-8xl font-black tracking-tighter italic">{selectedProfile?.matchScore || 90}</p>
                        <p className="text-2xl md:text-3xl font-black text-emerald-400 uppercase">%</p>
                      </div>
                      <div className="mt-8 md:mt-12 space-y-6">
                        <p className="text-xs text-white font-black leading-tight uppercase tracking-[0.2em] opacity-50">Analyse sur votre besoin :</p>
                        <p className="text-sm md:text-base text-white font-bold leading-relaxed italic border-l-[6px] border-emerald-500 pl-6 md:pl-8 py-2 bg-white/5 rounded-r-2xl">
                          "{searchQuery || "Besoin d'un expert senior"}"
                        </p>
                        <p className="text-xs text-emerald-400 font-black uppercase tracking-[0.2em] pt-6 flex items-center gap-3">
                          <CheckCircle size={18}/> Haut potentiel identifié
                        </p>
                      </div>
                    </div>
                  </div>

                </div>
              </div>

            </div>
          </div>
        </div>
      );

      const FreelanceDashboard = ({ marcAntoine, jobOffers, setCurrentView }) => {
        const activityReports = [
          { month: "Janvier 2026", status: "À saisir", color: "amber" },
          { month: "Décembre 2025", status: "Saisi", color: "emerald" },
          { month: "Novembre 2025", status: "Saisi", color: "blue" },
        ];

        const onboardingSteps = [
          { title: "Bienvenue Equity", status: "Complété", icon: <Sparkles size={16}/> },
          { title: "Profil & Expériences", status: "Complété", icon: <User size={16}/> },
          { title: "Dossier Administratif", status: "En cours", icon: <FileText size={16}/> },
          { title: "Chartes Groupe Equity", status: "À faire", icon: <ShieldAlert size={16}/> },
        ];

        const colorBox = (c) => {
          if (c === "amber") return "bg-amber-50 text-amber-600";
          if (c === "emerald") return "bg-emerald-50 text-emerald-600";
          return "bg-blue-50 text-blue-600";
        };

        return (
          <div className="space-y-12 pb-20">
            <div className="bg-gradient-to-br from-blue-700 to-blue-900 p-8 md:p-14 rounded-3xl md:rounded-[64px] text-white shadow-2xl relative overflow-hidden">
              <div className="absolute top-0 right-0 p-10 opacity-5 rotate-12 scale-150">
                <Users size={200}/>
              </div>
              <h2 className="text-3xl md:text-5xl font-black mb-4 tracking-tighter relative z-10">Bonjour, Marc-Antoine.</h2>
              <p className="text-blue-100 text-lg md:text-xl font-medium opacity-90 max-w-xl italic relative z-10">
                Votre mission à la SGP est active. Consultez vos rapports mensuels et opportunités.
              </p>
            </div>

            <div className="grid grid-cols-12 gap-8 md:gap-10">
              <div className="col-span-12 lg:col-span-8 space-y-12">
                <div className="bg-white p-6 md:p-12 rounded-3xl md:rounded-[56px] border border-slate-100 shadow-sm">
                  <h3 className="text-xl font-black text-slate-800 mb-10 flex items-center gap-3">
                    <ShieldCheck className="text-emerald-500" /> Mon Onboarding Groupe Equity
                  </h3>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {onboardingSteps.map((step, idx) => (
                      <div
                        key={idx}
                        className={`p-6 md:p-8 rounded-[32px] border flex items-center gap-6 transition-all ${step.status === 'Complété' ? 'bg-emerald-50/50 border-emerald-100 shadow-sm' : 'bg-slate-50 border-slate-100'}`}
                      >
                        <div className={`w-12 h-12 md:w-14 md:h-14 rounded-2xl flex items-center justify-center shrink-0 ${step.status === 'Complété' ? 'bg-emerald-500 text-white shadow-lg' : 'bg-white text-slate-400 border border-slate-200'}`}>
                          {step.status === 'Complété' ? <CheckCircle size={26} /> : step.icon}
                        </div>
                        <div>
                          <p className="font-black text-slate-800 text-base">{step.title}</p>
                          <p className={`text-[10px] font-black uppercase mt-1 ${step.status === 'Complété' ? 'text-emerald-600' : 'text-slate-400'}`}>{step.status}</p>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="bg-white p-6 md:p-12 rounded-3xl md:rounded-[56px] border border-slate-100 shadow-sm">
                  <h3 className="text-xl font-black text-slate-800 mb-10 flex items-center gap-3">
                    <PieChart className="text-blue-600" /> Rapports d'activités (CRA)
                  </h3>

                  <div className="space-y-4">
                    {activityReports.map((report, idx) => (
                      <div
                        key={idx}
                        className="p-6 md:p-8 border border-slate-50 rounded-[40px] bg-slate-50/50 flex flex-col sm:flex-row justify-between items-center group hover:bg-white hover:shadow-xl transition-all gap-4"
                      >
                        <div className="flex items-center gap-6 md:gap-8 w-full sm:w-auto">
                          <div className={`w-14 h-14 md:w-16 md:h-16 rounded-2xl md:rounded-[24px] ${colorBox(report.color)} flex items-center justify-center shadow-inner group-hover:scale-110 transition-transform shrink-0`}>
                            <Calendar size={28} />
                          </div>
                          <p className="font-black text-slate-800 text-lg md:text-xl">{report.month}</p>
                        </div>

                        <div className="flex items-center justify-between sm:justify-end gap-4 md:gap-8 w-full sm:w-auto">
                          <span className={`text-[10px] md:text-[11px] font-black uppercase px-4 md:px-6 py-2 md:py-2.5 rounded-2xl border-2 ${report.status === 'À saisir' ? 'bg-amber-50 text-amber-600 border-amber-100' : 'bg-emerald-50 text-emerald-700 border-emerald-100'}`}>
                            {report.status}
                          </span>
                          <button className="p-3 md:p-4 bg-white border border-slate-100 rounded-2xl text-slate-400 hover:text-blue-600 transition-colors shadow-sm">
                            <ArrowUpRight size={22} />
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>

              <div className="col-span-12 lg:col-span-4 space-y-10">
                <div className="bg-slate-900 rounded-3xl md:rounded-[56px] p-8 md:p-12 text-white space-y-10 shadow-2xl relative overflow-hidden group">
                  <div className="absolute -right-10 -top-10 opacity-10 rotate-12">
                    <Briefcase size={200} />
                  </div>
                  <h3 className="font-black text-[11px] uppercase tracking-[0.4em] text-emerald-400 relative z-10">Consultations ciblées</h3>
                  <div className="space-y-6 relative z-10">
                    {jobOffers.slice(0, 4).map((job, i) => (
                      <div key={i} className="p-5 bg-slate-800/80 rounded-2xl md:rounded-[32px] hover:border-emerald-500 border border-transparent transition-all cursor-pointer shadow-lg">
                        <p className="text-[10px] font-black text-slate-500 mb-2 uppercase tracking-[0.2em]">{job.client}</p>
                        <h4 className="font-bold text-sm md:text-base leading-tight text-white">{job.title}</h4>
                      </div>
                    ))}
                  </div>
                  <button
                    onClick={() => setCurrentView('freelance_job_offers')}
                    className="w-full py-5 md:py-6 bg-emerald-600 rounded-2xl md:rounded-[28px] font-black text-[11px] uppercase tracking-[0.3em] relative z-10 hover:bg-emerald-700 transition-all shadow-xl"
                  >
                    Consulter tout
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const FreelanceMissionSgpView = () => (
        <div className="space-y-12 pb-28">
          <div className="bg-white p-8 md:p-12 rounded-3xl md:rounded-[64px] border border-slate-100 shadow-sm flex flex-col md:flex-row justify-between items-center gap-10">
            <div className="flex flex-col sm:flex-row gap-6 md:gap-8 items-center text-center sm:text-left">
              <div className="w-20 h-20 md:w-24 md:h-24 bg-slate-900 rounded-[32px] flex items-center justify-center text-white shadow-2xl shrink-0 border-b-[6px] border-blue-600">
                <Building2 size={40} />
              </div>
              <div>
                <h2 className="text-3xl md:text-5xl font-black text-slate-800 tracking-tighter uppercase leading-none">Mission SGP</h2>
                <p className="text-emerald-600 font-black uppercase text-[10px] md:text-xs tracking-[0.4em] mt-3 italic">Contrat Actif • SGP-2026-042</p>
              </div>
            </div>
            <div className="flex gap-4 bg-slate-50 p-4 rounded-3xl border border-slate-100 w-full sm:w-auto">
              <div className="flex-1 sm:px-8 py-3 bg-white rounded-2xl shadow-sm border border-slate-100 text-center min-w-[100px]">
                <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Fin Estimée</p>
                <p className="text-base md:text-lg font-black text-slate-800">31.12.2026</p>
              </div>
              <div className="flex-1 sm:px-8 py-3 bg-emerald-600 rounded-2xl shadow-lg text-center text-white min-w-[100px]">
                <p className="text-[10px] font-black opacity-60 uppercase tracking-widest">Statut</p>
                <p className="text-base md:text-lg font-black italic">Active</p>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-12 gap-10 md:gap-12">
            <div className="col-span-12 lg:col-span-8 space-y-10 md:space-y-12">
              <div className="bg-white p-8 md:p-12 rounded-3xl md:rounded-[64px] border border-slate-100 shadow-sm">
                <h3 className="text-xl md:text-2xl font-black text-slate-800 mb-10 flex items-center gap-4 uppercase tracking-tighter">
                  <FileCheck className="text-emerald-600" size={32}/> Bibliothèque Contractuelle
                </h3>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {[
                    { name: "Contrat_Equity_SGP_2026.pdf", status: "Signé", type: "Contrat" },
                    { name: "PSSI_Societe_Grands_Projets.pdf", status: "Validée", type: "Sécurité" },
                    { name: "Charte_Ethique_Fournisseur.pdf", status: "Validée", type: "Légal" },
                    { name: "Onboarding_Kit_v3.zip", status: "Nouveau", type: "Ressources" }
                  ].map((doc, i) => (
                    <div key={i} className="p-5 md:p-6 bg-slate-50 border border-slate-100 rounded-2xl md:rounded-[32px] flex justify-between items-center group hover:bg-white hover:border-emerald-300 hover:shadow-xl transition-all cursor-pointer">
                      <div className="flex items-center gap-4 overflow-hidden">
                        <div className="p-3 bg-white rounded-xl md:rounded-2xl shadow-inner text-emerald-600 shrink-0">
                          <FileText size={24}/>
                        </div>
                        <div className="min-w-0">
                          <p className="font-black text-slate-800 text-sm truncate">{doc.name}</p>
                          <p className="text-[9px] font-black text-slate-400 uppercase tracking-widest">{doc.type}</p>
                        </div>
                      </div>
                      <Download size={18} className="text-slate-300 group-hover:text-emerald-600 shrink-0 ml-2" />
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-white p-8 md:p-12 rounded-3xl md:rounded-[64px] border border-slate-100 shadow-sm">
                <h3 className="text-xl md:text-2xl font-black text-slate-800 mb-10 flex items-center gap-4 uppercase tracking-tighter">
                  <ClipboardCheck className="text-blue-600" size={32}/> Historique des suivis trimestriels
                </h3>

                <div className="space-y-6">
                  {[
                    { period: "Trimestre 4 - 2025", feedback: "Excellente intégration. Objectifs de migration GCP atteints à 100%.", status: "Approuvé", date: "20.12.25" },
                    { period: "Trimestre 3 - 2025", feedback: "Déploiement Kafka validé. Satisfaction client maximale.", status: "Approuvé", date: "15.09.25" },
                    { period: "Trimestre 2 - 2025", feedback: "Lancement audit. Architecture cible validée.", status: "Approuvé", date: "10.06.25" }
                  ].map((suivi, i) => (
                    <div key={i} className="relative flex items-start gap-4 md:gap-8 group">
                      <div className="w-1.5 bg-slate-100 absolute left-8 top-10 bottom-0 -z-10 rounded-full group-last:hidden"></div>
                      <div className="w-12 h-12 md:w-16 md:h-16 rounded-xl md:rounded-[24px] bg-slate-900 flex items-center justify-center shrink-0 shadow-2xl border-4 border-white text-white font-black text-[10px] md:text-xs">
                        Q{4-i}
                      </div>
                      <div className="flex-1 bg-slate-50 p-6 md:p-8 rounded-3xl md:rounded-[48px] border border-slate-100 group-hover:bg-white transition-all">
                        <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2">
                          <p className="font-black text-slate-800 uppercase tracking-widest text-sm">{suivi.period}</p>
                          <span className="text-[10px] font-black text-slate-400">Revue du {suivi.date}</span>
                        </div>
                        <p className="text-slate-600 font-medium italic border-l-4 border-emerald-400 pl-4 md:pl-6 leading-relaxed">"{suivi.feedback}"</p>
                        <div className="mt-6 flex justify-end">
                          <span className="bg-emerald-50 text-emerald-700 px-4 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest border border-emerald-100">
                            {suivi.status}
                          </span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="col-span-12 lg:col-span-4 space-y-12">
              <div className="p-10 md:p-12 bg-slate-900 rounded-3xl md:rounded-[64px] text-white shadow-2xl relative overflow-hidden border-b-[12px] border-emerald-500">
                <div className="absolute -right-10 -bottom-10 opacity-10 rotate-12 scale-150">
                  <Clock size={160}/>
                </div>
                <div className="relative z-10 space-y-8 md:space-y-10">
                  <div className="flex justify-between items-center italic">
                    <h4 className="font-black text-[11px] uppercase tracking-[0.5em] text-emerald-400">Time Tracking</h4>
                    <PieChart size={24} className="text-amber-400" />
                  </div>
                  <div className="space-y-4">
                    <p className="text-2xl md:text-3xl font-black tracking-tighter">CRA Janvier</p>
                    <p className="text-slate-400 text-sm font-bold leading-relaxed">Votre rapport d'activité mensuel est disponible pour la saisie.</p>
                  </div>
                  <button className="w-full py-5 md:py-6 bg-emerald-600 rounded-2xl md:rounded-[32px] font-black text-xs uppercase hover:bg-emerald-700 transition-all">
                    Générer le rapport
                  </button>
                </div>
              </div>

              <div className="bg-white p-8 md:p-12 rounded-3xl md:rounded-[64px] border border-slate-100 shadow-sm text-center space-y-8 group">
                <h3 className="font-black text-[11px] uppercase tracking-[0.4em] text-slate-400">Support Equity</h3>
                <div className="w-20 h-20 md:w-24 md:h-24 bg-blue-50 text-blue-600 rounded-3xl md:rounded-[32px] flex items-center justify-center mx-auto shadow-inner">
                  <Headphones size={36}/>
                </div>
                <div className="space-y-2">
                  <p className="font-black text-slate-800 text-lg uppercase tracking-widest">Thomas Leroy</p>
                  <p className="text-[10px] font-bold text-slate-400 uppercase italic">Account Manager SGP</p>
                </div>
                <button className="w-full py-4 md:py-5 bg-slate-50 border border-slate-100 rounded-2xl md:rounded-3xl font-black text-[10px] uppercase tracking-widest text-slate-600 hover:bg-blue-600 hover:text-white transition-all">
                  Lui écrire
                </button>
              </div>
            </div>
          </div>
        </div>
      );

      // --- APP ---
      function App() {
        const [userRole, setUserRole] = useState('client');
        const [currentView, setCurrentView] = useState('marketplace');
        const [selectedProfile, setSelectedProfile] = useState(null);
        const [searchQuery, setSearchQuery] = useState('Data Engineer expérimenté pour infrastructure cloud complexe');
        const [isMatching, setIsMatching] = useState(false);
        const [hasMatched, setHasMatched] = useState(false);
        const [tjmRange, setTjmRange] = useState(650);
        const [showIntroductionIntro, setShowIntroductionIntro] = useState(false);
        const [showSourcingIntro, setShowSourcingIntro] = useState(false);
        const [showDownloadModal, setShowDownloadModal] = useState(false);
        const [selectedDispo, setSelectedDispo] = useState('Sous 1 mois');

        const handleStartMatching = () => {
          setIsMatching(true);
          setHasMatched(false);
          setTimeout(() => {
            setIsMatching(false);
            setHasMatched(true);
          }, 1200);
        };

        const switchRole = (role) => {
          setUserRole(role);
          setHasMatched(false);
          setSelectedProfile(null);
          setCurrentView(role === 'client' ? 'marketplace' : 'freelance_dashboard');
        };

        return (
          <div className="flex flex-col md:flex-row min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-emerald-100 selection:text-emerald-900">
            <Sidebar
              userRole={userRole}
              switchRole={switchRole}
              currentView={currentView}
              setCurrentView={setCurrentView}
            />

            <main className="flex-1 p-6 md:p-12 overflow-y-auto overflow-x-hidden">
              <header className="flex flex-col sm:flex-row justify-between items-center mb-10 md:mb-16 gap-6 px-4">
                <div className="text-center sm:text-left">
                  <h1 className="text-[10px] font-black text-slate-400 uppercase tracking-[0.4em] mb-2 italic">Groupe Equity Workspace</h1>
                  <p className="text-2xl md:text-4xl font-black text-slate-900 tracking-tighter uppercase">
                    {userRole === 'client' ? 'Dashboard Client' : `Espace : ${MARC_ANTOINE.name}`}
                  </p>
                </div>
                <div className="flex gap-4 md:gap-6 items-center">
                  <button className="relative w-12 h-12 md:w-16 md:h-16 bg-white rounded-2xl md:rounded-3xl border border-slate-100 shadow-sm flex items-center justify-center text-slate-400 hover:text-emerald-600 transition-all hover:scale-110">
                    <Bell size={24} />
                    <span className="absolute top-3 md:top-4 right-3 md:right-4 w-3 md:w-4 h-3 md:h-4 bg-red-500 border-2 md:border-4 border-white rounded-full"></span>
                  </button>
                  <div className="flex items-center gap-3 md:gap-5 bg-white pl-4 md:pl-5 pr-8 md:pr-10 py-2.5 md:py-3.5 rounded-2xl md:rounded-3xl border border-slate-100 shadow-sm">
                    <div className="w-9 h-9 md:w-11 md:h-11 rounded-xl md:rounded-2xl bg-slate-900 text-white flex items-center justify-center font-black text-sm md:text-base uppercase shadow-lg">
                      {userRole === 'client' ? 'S' : 'M'}
                    </div>
                    <span className="text-[10px] md:text-[11px] font-black text-slate-600 uppercase tracking-[0.2em] md:tracking-[0.3em]">
                      {userRole === 'client' ? 'SGP' : 'Freelance'}
                    </span>
                  </div>
                </div>
              </header>

              {userRole === 'client' ? (
                <>
                  {currentView === 'marketplace' && (
                    <MarketplaceView
                      searchQuery={searchQuery}
                      setSearchQuery={setSearchQuery}
                      handleStartMatching={handleStartMatching}
                      isMatching={isMatching}
                      tjmRange={tjmRange}
                      setTjmRange={setTjmRange}
                      selectedDispo={selectedDispo}
                      setSelectedDispo={setSelectedDispo}
                      hasMatched={hasMatched}
                      setSelectedProfile={setSelectedProfile}
                      setCurrentView={setCurrentView}
                      setShowSourcingIntro={setShowSourcingIntro}
                    />
                  )}

                  {currentView === 'consultations' && (
                    <div className="space-y-10 pb-20 px-4">
                      <div>
                        <h2 className="text-3xl font-black text-slate-800 tracking-tighter">Précédentes consultations IA</h2>
                        <p className="text-slate-500 italic mt-2">Historique SkillMatch complet.</p>
                      </div>

                      <div className="grid grid-cols-1 gap-6">
                        {CONSULTATION_HISTORY.map(item => (
                          <div
                            key={item.id}
                            className="bg-white p-6 md:p-8 rounded-3xl md:rounded-[48px] border border-slate-100 shadow-sm flex flex-col md:flex-row justify-between items-center group hover:border-emerald-300 transition-all hover:shadow-2xl gap-6"
                          >
                            <div className="flex gap-6 md:gap-8 items-center w-full md:w-auto">
                              <div className="w-14 h-14 md:w-16 md:h-16 bg-slate-50 rounded-2xl md:rounded-[24px] flex items-center justify-center text-slate-400 group-hover:text-emerald-600 transition-colors shadow-inner shrink-0">
                                <History size={30} />
                              </div>
                              <div>
                                <h4 className="text-lg md:text-xl font-black text-slate-800 leading-tight">"{item.query}"</h4>
                                <p className="text-[11px] font-black text-slate-400 uppercase mt-2">{item.date} • {item.results} profils</p>
                              </div>
                            </div>

                            <div className="text-right flex items-center justify-between md:justify-end gap-12 w-full md:w-auto">
                              <div>
                                <p className="text-[10px] font-black text-slate-400 uppercase mb-1">Match Moyen</p>
                                <p className="text-2xl md:text-3xl font-black text-emerald-600">{item.matchAvg}</p>
                              </div>
                              <button className="bg-slate-900 text-white px-8 md:px-10 py-3 md:py-4 rounded-xl md:rounded-[24px] font-black text-[11px] uppercase hover:bg-emerald-600 transition-all shadow-xl">
                                Relancer
                              </button>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  {currentView === 'client_missions' && (
                    <div className="space-y-10 pb-20 px-4">
                      <h2 className="text-3xl font-black text-slate-800 tracking-tighter italic">Experts Equity actifs</h2>
                      <div className="bg-white rounded-3xl md:rounded-[56px] border border-slate-100 shadow-sm overflow-x-auto border-b-8 border-emerald-500">
                        <table className="w-full text-left border-collapse min-w-[600px]">
                          <thead className="bg-slate-50 text-[11px] font-black text-slate-400 uppercase tracking-[0.4em] border-b">
                            <tr>
                              <th className="px-12 py-7">Nom</th>
                              <th className="px-12 py-7">ID Contrat</th>
                              <th className="px-12 py-7 text-right">Action</th>
                            </tr>
                          </thead>
                          <tbody className="divide-y divide-slate-50">
                            {SGP_MISSIONS.map((m, idx) => (
                              <tr key={idx} className="hover:bg-slate-50/80 transition-all">
                                <td className="px-12 py-8 font-black text-slate-800">{m.name}</td>
                                <td className="px-12 py-8 font-mono text-sm text-slate-400 uppercase">{m.ref}</td>
                                <td className="px-12 py-8 text-right pr-16">
                                  <button className="p-3 bg-white border border-slate-100 rounded-xl text-slate-300 hover:text-emerald-600 transition-all">
                                    <Settings size={20}/>
                                  </button>
                                </td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  )}

                  {currentView === 'profile_detail' && (
                    <ProfileDetailView
                      selectedProfile={selectedProfile}
                      setCurrentView={setCurrentView}
                      setShowIntroductionIntro={setShowIntroductionIntro}
                      setShowDownloadModal={setShowDownloadModal}
                      searchQuery={searchQuery}
                    />
                  )}
                </>
              ) : (
                <>
                  {currentView === 'freelance_dashboard' && (
                    <FreelanceDashboard
                      marcAntoine={MARC_ANTOINE}
                      jobOffers={JOB_OFFERS}
                      setCurrentView={setCurrentView}
                    />
                  )}

                  {currentView === 'freelance_profile' && (
                    <div className="max-w-4xl mx-auto p-8 md:p-12 bg-white rounded-3xl md:rounded-[64px] border border-slate-100 shadow-sm text-center space-y-8">
                      <h2 className="text-2xl md:text-3xl font-black uppercase tracking-tighter">Mon Profil Public</h2>
                      <p className="text-slate-500 font-medium italic leading-relaxed">
                        Toutes les informations (TJM, Disponibilité, Bio) sont modifiables. Votre identité reste certifiée par le Groupe Equity.
                      </p>
                      <button className="bg-emerald-600 text-white px-10 md:px-14 py-4 md:py-6 rounded-2xl md:rounded-[32px] font-black uppercase tracking-widest shadow-2xl">
                        Enregistrer mon profil
                      </button>
                    </div>
                  )}

                  {currentView === 'freelance_job_offers' && (
                    <div className="space-y-12 pb-24 px-4">
                      <h2 className="text-3xl md:text-4xl font-black tracking-tighter uppercase">Consultations en cours</h2>
                      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10">
                        {JOB_OFFERS.map((job, idx) => (
                          <div
                            key={idx}
                            className="group bg-white p-10 md:p-12 rounded-3xl md:rounded-[64px] border border-slate-100 shadow-sm hover:shadow-2xl hover:border-blue-400 transition-all cursor-pointer flex flex-col relative overflow-hidden"
                          >
                            <div className="absolute top-0 right-0 bg-blue-600 text-white px-6 md:px-8 py-2 md:py-2.5 text-[10px] font-black uppercase rounded-bl-xl md:rounded-bl-[32px]">
                              {job.type}
                            </div>
                            <div className="w-14 h-14 bg-slate-900 rounded-xl md:rounded-[28px] flex items-center justify-center font-black text-white text-xl shadow-xl mb-10 md:mb-12 group-hover:scale-110 transition-transform">
                              {job.client[0]}
                            </div>
                            <p className="text-[10px] md:text-[11px] font-black text-slate-400 uppercase tracking-[0.3em] md:tracking-[0.4em] mb-4">{job.client}</p>
                            <h3 className="text-2xl md:text-3xl font-black text-slate-800 leading-tight mb-10 md:mb-12 flex-1 tracking-tighter">{job.title}</h3>
                            <div className="pt-8 md:pt-10 border-t border-slate-50 flex justify-between font-black text-slate-700 italic text-[10px] md:text-[11px] uppercase tracking-widest">
                              <span>{job.tj}</span>
                              <span>{job.loc}</span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  {currentView === 'freelance_mission_sgp' && <FreelanceMissionSgpView />}
                </>
              )}

              {/* MODALES */}
              {showIntroductionIntro && (
                <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-xl z-[100] flex items-center justify-center p-4">
                  <div className="bg-white p-10 md:p-16 rounded-3xl md:rounded-[64px] shadow-2xl max-w-xl w-full text-center space-y-10 md:space-y-12 border-b-[16px] border-emerald-500">
                    <div className="w-24 h-24 md:w-32 md:h-32 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center mx-auto shadow-inner border-[10px] md:border-[12px] border-white shadow-xl">
                      <ShieldCheck size={64} />
                    </div>
                    <div className="space-y-6">
                      <h3 className="text-3xl md:text-4xl font-black text-slate-800 tracking-tighter italic uppercase">Mise en relation</h3>
                      <p className="text-slate-500 font-bold px-4 text-lg md:text-xl leading-relaxed italic">
                        Votre Account Manager Groupe Equity a été alerté. Nous supervisons l'introduction humaine pour votre projet SGP.
                      </p>
                    </div>
                    <button
                      onClick={() => setShowIntroductionIntro(false)}
                      className="w-full py-6 md:py-7 bg-slate-900 text-white rounded-2xl md:rounded-[40px] font-black text-sm uppercase tracking-[0.3em] hover:bg-slate-800 transition-all shadow-2xl"
                    >
                      Parfait
                    </button>
                  </div>
                </div>
              )}

              {showSourcingIntro && (
                <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-xl z-[100] flex items-center justify-center p-4 text-center">
                  <div className="bg-white p-10 md:p-16 rounded-3xl md:rounded-[64px] shadow-2xl max-w-xl w-full space-y-10 md:space-y-12 border-b-[16px] border-indigo-600">
                    <div className="w-24 h-24 md:w-32 md:h-32 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto shadow-inner border-[10px] md:border-[12px] border-white shadow-xl">
                      <Headphones size={64} />
                    </div>
                    <h3 className="text-3xl md:text-4xl font-black text-slate-800 tracking-tighter italic uppercase">Sourcing sur mesure</h3>
                    <p className="text-slate-500 font-bold px-6 text-lg md:text-xl leading-relaxed italic">
                      Nos account managers ont reçu votre demande de renfort. Un expert vous recontacte prochainement pour affiner le matching.
                    </p>
                    <button
                      onClick={() => setShowSourcingIntro(false)}
                      className="w-full py-6 md:py-7 bg-slate-900 text-white rounded-2xl md:rounded-[40px] font-black text-sm uppercase tracking-[0.3em] hover:bg-slate-800 transition-all shadow-2xl"
                    >
                      Entendu
                    </button>
                  </div>
                </div>
              )}

              {showDownloadModal && (
                <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-xl z-[100] flex items-center justify-center p-4">
                  <div className="bg-white p-10 md:p-16 rounded-3xl md:rounded-[64px] shadow-2xl max-w-sm w-full text-center space-y-10 md:space-y-12 border-t-[16px] border-blue-500">
                    <div className="w-24 h-24 md:w-28 md:h-28 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mx-auto shadow-inner border-[10px] md:border-[12px] border-white shadow-xl">
                      <Download size={48} />
                    </div>
                    <div>
                      <h3 className="text-2xl md:text-3xl font-black text-slate-800 tracking-tighter italic uppercase">MD • Dossier Prêt</h3>
                      <p className="text-slate-400 font-bold italic text-base mt-2">Compilation complète du CV certifié Equity.</p>
                    </div>
                    <button
                      onClick={() => setShowDownloadModal(false)}
                      className="w-full py-6 md:py-7 bg-blue-600 text-white rounded-2xl md:rounded-[40px] font-black uppercase tracking-[0.3em] shadow-xl text-xs"
                    >
                      Ouvrir
                    </button>
                  </div>
                </div>
              )}

            </main>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
